<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Automating your analyses and executing long-running analyses on remote computers | Introduction to Remote Computing</title>
  <meta name="description" content="7 Automating your analyses and executing long-running analyses on remote computers | Introduction to Remote Computing" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Automating your analyses and executing long-running analyses on remote computers | Introduction to Remote Computing" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ngs-docs.github.io/2021-august-remote-computing/" />
  
  
  <meta name="github-repo" content="ngs-docs/2021-august-remote-computing/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Automating your analyses and executing long-running analyses on remote computers | Introduction to Remote Computing" />
  
  
  

<meta name="author" content="C. Titus Brown, Saranya Canchi, Amanda Charbonneau, Marisa Lim, Abhijna Parigi, Pamela Reynolds, and Nick Ulle." />


<meta name="date" content="2021-08-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="structuring-your-projects-for-current-and-future-you.html"/>
<link rel="next" href="keeping-track-of-your-files-with-version-control.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Introduction to Remote Computing (Pilot)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introductory-skills"><i class="fa fa-check"></i>Introductory skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#intermediate-skills"><i class="fa fa-check"></i>Intermediate skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#advanced-skills"><i class="fa fa-check"></i>Advanced skills</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html"><i class="fa fa-check"></i><b>1</b> Introduction to the UNIX Command Line</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#introduction-to-unix"><i class="fa fa-check"></i><b>1.1</b> Introduction to UNIX</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> Learning Goals</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#navigation"><i class="fa fa-check"></i><b>1.2</b> Navigation</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#learning-goals-1"><i class="fa fa-check"></i><b>1.2.1</b> Learning Goals</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#viewing-searching"><i class="fa fa-check"></i><b>1.3</b> Viewing &amp; Searching</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#learning-goals-2"><i class="fa fa-check"></i><b>1.3.1</b> Learning Goals</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#file-manipulation"><i class="fa fa-check"></i><b>1.4</b> File Manipulation</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#learning-goals-3"><i class="fa fa-check"></i><b>1.4.1</b> Learning Goals</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#renaming-a-bunch-of-files"><i class="fa fa-check"></i><b>1.4.2</b> Renaming a bunch of files</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-the-unix-command-line.html"><a href="introduction-to-the-unix-command-line.html#some-final-notes"><i class="fa fa-check"></i><b>1.5</b> Some final notes</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html"><i class="fa fa-check"></i><b>2</b> Creating and modifying text files on remote computers</a>
<ul>
<li class="chapter" data-level="2.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#text-files-vs-other-files"><i class="fa fa-check"></i><b>2.1</b> Text files vs other files</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#ok-ok-what-does-this-all-mean-in-practice"><i class="fa fa-check"></i><b>2.1.1</b> OK, OK, what does this all mean in practice?</a></li>
<li class="chapter" data-level="2.1.2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#working-with-gzipped-files"><i class="fa fa-check"></i><b>2.1.2</b> Working with gzipped files</a></li>
<li class="chapter" data-level="2.1.3" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#digression-file-extensions-are-often-meaningful-but-dont-have-to-be"><i class="fa fa-check"></i><b>2.1.3</b> Digression: file extensions are often meaningful (but don’t have to be)</a></li>
<li class="chapter" data-level="2.1.4" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#lets-edit-this-file"><i class="fa fa-check"></i><b>2.1.4</b> Let’s edit this file!</a></li>
<li class="chapter" data-level="2.1.5" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#running-the-editor-and-exitingsaving"><i class="fa fa-check"></i><b>2.1.5</b> Running the editor and exiting/saving</a></li>
<li class="chapter" data-level="2.1.6" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#navigating-in-nano"><i class="fa fa-check"></i><b>2.1.6</b> Navigating in nano</a></li>
<li class="chapter" data-level="2.1.7" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#long-lines---note"><i class="fa fa-check"></i><b>2.1.7</b> Long lines - note!</a></li>
<li class="chapter" data-level="2.1.8" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#slightly-more-advanced-features"><i class="fa fa-check"></i><b>2.1.8</b> Slightly more advanced features</a></li>
<li class="chapter" data-level="2.1.9" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#getting-help"><i class="fa fa-check"></i><b>2.1.9</b> Getting help!</a></li>
<li class="chapter" data-level="2.1.10" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#challenges"><i class="fa fa-check"></i><b>2.1.10</b> Challenges:</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#big-powerful-editors"><i class="fa fa-check"></i><b>2.2</b> Big Powerful Editors</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#big-powerful-editor-1-vi"><i class="fa fa-check"></i><b>2.2.1</b> Big Powerful Editor 1: vi</a></li>
<li class="chapter" data-level="2.2.2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#big-powerful-editor-2-emacs"><i class="fa fa-check"></i><b>2.2.2</b> Big Powerful Editor 2: emacs</a></li>
<li class="chapter" data-level="2.2.3" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#an-opinion"><i class="fa fa-check"></i><b>2.2.3</b> An opinion</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#remote-vs-local-and-why-editors"><i class="fa fa-check"></i><b>2.3</b> Remote vs local, and why editors?</a></li>
<li class="chapter" data-level="2.4" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#editors-that-run-locally-on-your-laptopdesktop"><i class="fa fa-check"></i><b>2.4</b> Editors that run locally on your laptop/desktop</a></li>
<li class="chapter" data-level="2.5" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#thinking-about-editors-as-a-means-to-an-end"><i class="fa fa-check"></i><b>2.5</b> Thinking about editors as a means to an end</a></li>
<li class="chapter" data-level="2.6" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#other-ways-to-create-edit-filter-and-modify-files"><i class="fa fa-check"></i><b>2.6</b> Other ways to create, edit, filter, and modify files</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#redirection-appending-and-piping."><i class="fa fa-check"></i><b>2.6.1</b> Redirection, appending, and piping.</a></li>
<li class="chapter" data-level="2.6.2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#the-simplest-possible-editor---echo"><i class="fa fa-check"></i><b>2.6.2</b> The simplest possible “editor” - echo</a></li>
<li class="chapter" data-level="2.6.3" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#piping-and-filtering"><i class="fa fa-check"></i><b>2.6.3</b> Piping and filtering</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#working-with-csv-files"><i class="fa fa-check"></i><b>2.7</b> Working with CSV files</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#use-csvtk-when-working-with-csv-files-maybe."><i class="fa fa-check"></i><b>2.7.1</b> Use csvtk when working with CSV files, maybe.</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#a-quick-primer-on-compression."><i class="fa fa-check"></i><b>2.8</b> A quick primer on compression.</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#gzip-and-.gz-files."><i class="fa fa-check"></i><b>2.8.1</b> Gzip and <code>.gz</code> files.</a></li>
<li class="chapter" data-level="2.8.2" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#zip-and-compressing-multiple-files."><i class="fa fa-check"></i><b>2.8.2</b> zip and compressing <em>multiple</em> files.</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="creating-and-modifying-text-files-on-remote-computers.html"><a href="creating-and-modifying-text-files-on-remote-computers.html#concluding-thoughts"><i class="fa fa-check"></i><b>2.9</b> Concluding thoughts</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html"><i class="fa fa-check"></i><b>3</b> Connecting to remote computers with ssh</a>
<ul>
<li class="chapter" data-level="3.1" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#ssh-and-clients"><i class="fa fa-check"></i><b>3.1</b> SSH and Clients</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#some-security-thoughts"><i class="fa fa-check"></i><b>3.1.1</b> Some security thoughts</a></li>
<li class="chapter" data-level="3.1.2" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#ssh-as-a-protocol---many-clients"><i class="fa fa-check"></i><b>3.1.2</b> ssh as a protocol - many clients!</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#mac-os-x-using-the-terminal-program"><i class="fa fa-check"></i><b>3.2</b> Mac OS X: Using the Terminal program</a></li>
<li class="chapter" data-level="3.3" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#windows-connecting-to-remote-computers-with-mobaxterm"><i class="fa fa-check"></i><b>3.3</b> Windows: Connecting to remote computers with MobaXterm</a></li>
<li class="chapter" data-level="3.4" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#logging-out-and-logging-back-in."><i class="fa fa-check"></i><b>3.4</b> Logging out and logging back in.</a></li>
<li class="chapter" data-level="3.5" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#youre-logged-on-to-a-remote-computer.-now-what"><i class="fa fa-check"></i><b>3.5</b> You’re logged on to a remote computer. Now what?</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#welcome-to-your-account"><i class="fa fa-check"></i><b>3.5.1</b> Welcome to your account!</a></li>
<li class="chapter" data-level="3.5.2" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#loading-some-files-into-your-account"><i class="fa fa-check"></i><b>3.5.2</b> Loading some files into your account</a></li>
<li class="chapter" data-level="3.5.3" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#revisiting-file-and-path-manipulation"><i class="fa fa-check"></i><b>3.5.3</b> Revisiting file and path manipulation</a></li>
<li class="chapter" data-level="3.5.4" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#revisiting-file-editing"><i class="fa fa-check"></i><b>3.5.4</b> Revisiting file editing</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#copying-files-to-and-from-your-local-computer."><i class="fa fa-check"></i><b>3.6</b> Copying files to and from your local computer.</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#mac-os-x-copying-files-using-ssh."><i class="fa fa-check"></i><b>3.6.1</b> Mac OS X: Copying files using ssh.</a></li>
<li class="chapter" data-level="3.6.2" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#windows-copying-files-using-mobaxterm."><i class="fa fa-check"></i><b>3.6.2</b> Windows: Copying files using MobaXterm.</a></li>
<li class="chapter" data-level="3.6.3" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#view-and-change-the-file-you-just-downloaded"><i class="fa fa-check"></i><b>3.6.3</b> View and change the file you just downloaded</a></li>
<li class="chapter" data-level="3.6.4" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#copy-the-file-back-to-farm."><i class="fa fa-check"></i><b>3.6.4</b> Copy the file back to farm.</a></li>
<li class="chapter" data-level="3.6.5" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#digression-why-do-you-need-to-log-intolog-out-of-farm-on-mac-os-x"><i class="fa fa-check"></i><b>3.6.5</b> Digression: why do you need to log into/log out of farm on Mac OS X?</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#some-commands-are-available-others-are-not."><i class="fa fa-check"></i><b>3.7</b> Some commands are available! Others are not.</a></li>
<li class="chapter" data-level="3.8" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#summing-up-file-transfer---a-challenge"><i class="fa fa-check"></i><b>3.8</b> Summing up file transfer - a challenge!</a></li>
<li class="chapter" data-level="3.9" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#working-on-shared-systems"><i class="fa fa-check"></i><b>3.9</b> Working on shared systems</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#shared-disk-space"><i class="fa fa-check"></i><b>3.9.1</b> Shared disk space</a></li>
<li class="chapter" data-level="3.9.2" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#configuring-your-account-on-login"><i class="fa fa-check"></i><b>3.9.2</b> Configuring your account on login</a></li>
<li class="chapter" data-level="3.9.3" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#using-multiple-terminals"><i class="fa fa-check"></i><b>3.9.3</b> Using multiple terminals</a></li>
<li class="chapter" data-level="3.9.4" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#looking-at-whats-running"><i class="fa fa-check"></i><b>3.9.4</b> Looking at what’s running</a></li>
<li class="chapter" data-level="3.9.5" data-path="connecting-to-remote-computers-with-ssh.html"><a href="connecting-to-remote-computers-with-ssh.html#summing-things-up"><i class="fa fa-check"></i><b>3.9.5</b> Summing things up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="running-programs-on-remote-computers-and-retrieving-the-results.html"><a href="running-programs-on-remote-computers-and-retrieving-the-results.html"><i class="fa fa-check"></i><b>4</b> Running programs on remote computers and retrieving the results</a></li>
<li class="chapter" data-level="5" data-path="installing-software-on-remote-computers-with-conda.html"><a href="installing-software-on-remote-computers-with-conda.html"><i class="fa fa-check"></i><b>5</b> Installing software on remote computers with conda</a></li>
<li class="chapter" data-level="6" data-path="structuring-your-projects-for-current-and-future-you.html"><a href="structuring-your-projects-for-current-and-future-you.html"><i class="fa fa-check"></i><b>6</b> Structuring your projects for current and future you</a></li>
<li class="chapter" data-level="7" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><i class="fa fa-check"></i><b>7</b> Automating your analyses and executing long-running analyses on remote computers</a>
<ul>
<li class="chapter" data-level="7.1" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#getting-started"><i class="fa fa-check"></i><b>7.1</b> Getting started</a></li>
<li class="chapter" data-level="7.2" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#what-is-a-script"><i class="fa fa-check"></i><b>7.2</b> What is a script?</a></li>
<li class="chapter" data-level="7.3" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#automating-commands-by-putting-them-in-a-text-file"><i class="fa fa-check"></i><b>7.3</b> Automating commands by putting them in a text file</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#running-scripts-with-bash"><i class="fa fa-check"></i><b>7.3.1</b> Running scripts with <code>bash</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#bash-script-headers-and-permissions"><i class="fa fa-check"></i><b>7.3.2</b> Bash script headers and permissions</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#troubleshooting-scripts"><i class="fa fa-check"></i><b>7.4</b> Troubleshooting scripts</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#practicing-set--e-in-bash-scripts"><i class="fa fa-check"></i><b>7.4.1</b> Practicing <code>set -e</code> in bash scripts</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#conditions-and-loops"><i class="fa fa-check"></i><b>7.5</b> Conditions and loops</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#conditions-and-if-statements"><i class="fa fa-check"></i><b>7.5.1</b> Conditions and If statements</a></li>
<li class="chapter" data-level="7.5.2" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#for-loops"><i class="fa fa-check"></i><b>7.5.2</b> <code>for</code> Loops</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#multiple-screens"><i class="fa fa-check"></i><b>7.6</b> Multiple screens</a></li>
<li class="chapter" data-level="7.7" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#concluding-thoughts-1"><i class="fa fa-check"></i><b>7.7</b> Concluding thoughts</a></li>
<li class="chapter" data-level="7.8" data-path="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html"><a href="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers.html#appendix-exercise-answers"><i class="fa fa-check"></i><b>7.8</b> Appendix: exercise answers</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="keeping-track-of-your-files-with-version-control.html"><a href="keeping-track-of-your-files-with-version-control.html"><i class="fa fa-check"></i><b>8</b> Keeping track of your files with version control</a></li>
<li class="chapter" data-level="9" data-path="automating-your-analyses-with-the-snakemake-workflow-system.html"><a href="automating-your-analyses-with-the-snakemake-workflow-system.html"><i class="fa fa-check"></i><b>9</b> Automating your analyses with the snakemake workflow system</a></li>
<li class="chapter" data-level="10" data-path="executing-large-analyses-on-hpc-clusters-with-slurm.html"><a href="executing-large-analyses-on-hpc-clusters-with-slurm.html"><i class="fa fa-check"></i><b>10</b> Executing large analyses on HPC clusters with slurm</a></li>
<li class="chapter" data-level="11" data-path="making-use-of-on-demand-cloud-computers-from-amazon-web-services.html"><a href="making-use-of-on-demand-cloud-computers-from-amazon-web-services.html"><i class="fa fa-check"></i><b>11</b> Making use of on-demand “cloud” computers from Amazon Web Services</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#workshop-protocol"><i class="fa fa-check"></i>Workshop Protocol</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Remote Computing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="automating-your-analyses-and-executing-long-running-analyses-on-remote-computers" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Automating your analyses and executing long-running analyses on remote computers</h1>
<p>This two hour workshop will show attendees how to automate their
analyses using shell scripts, as well as run and manage software that
takes minutes, hours, or days to execute. We’ll also show you how to
disconnect from and resume running processes using the ‘screen’ and ‘tmux’
commands.</p>
<div id="getting-started" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Getting started</h2>
<ul>
<li>log in to Farm account</li>
</ul>
</div>
<div id="what-is-a-script" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> What is a script?</h2>
<ul>
<li>intro to what a “shell script” is
<ul>
<li>we’re teaching how to make shell scripts today, but scripts can be in any programming language (R, python, etc.)</li>
</ul></li>
<li>why/when we want to use scripts vs. typing commands directly at the terminal
<ul>
<li>automate: don’t have to remember all the commands and type then one at a time</li>
<li>scale up: can use same script for multiple samples, multiple processes</li>
<li>reproduce/share: easier to reproduce or share analyses because it’s all written down</li>
<li>…</li>
</ul></li>
</ul>
</div>
<div id="automating-commands-by-putting-them-in-a-text-file" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Automating commands by putting them in a text file</h2>
<ul>
<li>can demo same set of commands run in terminal vs. putting into a text file
<ul>
<li>mention how to look up terminal history (<code>history</code>)</li>
<li>review content from workshop 2 on creating &amp; modifying text files</li>
<li>in practice, the process is: make file, edit, save, test run, edit, save, re-run, …</li>
</ul></li>
<li>note that commands are executed in the order that they appear in the script</li>
<li>something about file extensions (<code>.sh</code>, …)</li>
</ul>
<div id="running-scripts-with-bash" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Running scripts with <code>bash</code></h3>
<ul>
<li>running it with ‘bash’ explicitly
<ul>
<li>i.e., <code>./myscript.sh</code> vs. <code>bash myscript.sh</code></li>
</ul></li>
<li>run sets of commands in a script but not in loops yet - do that in section below</li>
</ul>
</div>
<div id="bash-script-headers-and-permissions" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Bash script headers and permissions</h3>
<ul>
<li>putting a header in and changing permissions; executing via shell prompt
<ul>
<li>read access to run it, execute access to run it with the shebang, write access to see it in the dir?</li>
<li><code>#!/bin/bash</code> header</li>
</ul></li>
</ul>
</div>
</div>
<div id="troubleshooting-scripts" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Troubleshooting scripts</h2>
<ul>
<li>what happens on failure; <code>set -e</code> and <code>set -x</code>
<ul>
<li>interpreting error messages</li>
<li>as another example of <code>set</code> options, could mention adding <code>set -o noclobber</code> to prevent overwriting in bash script too (was mentioned in workshop 2 as a way to prevent overwriting <code>echo this is a file &gt; file.txt</code> and <code>echo this is more text &gt; file.txt</code>)</li>
</ul></li>
</ul>
<div id="practicing-set--e-in-bash-scripts" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Practicing <code>set -e</code> in bash scripts</h3>
<blockquote>
<ol style="list-style-type: decimal">
<li>download some small fastq files - currently using example MiSeq files from binder</li>
<li>install some software (i.e., FastQC with <code>conda</code> or <code>mamba</code> –&gt; these are covered in Workshop 5; remember to config channels!)</li>
<li>loop through samples and run fastqc with bash script</li>
</ol>
</blockquote>
<pre><code># create output report directory
mkdir ./data/fastqc_reports

# create bash script using nano text editor
# save and exit with ctrl-o, enter, ctrl-x on keyboard
nano set_e.sh</code></pre>
<p>Create a bash script with the following commands, this version includes <code>set -e</code>:</p>
<pre><code>#!/bin/bash

set -e

OUTDIR=&#39;fastqc_reports&#39;

for i in ./data/MiSeq/*.fastq
do
   echo $i
   fastqc $i -o $OUTDIR
done</code></pre>
<p>Another way to type bash <code>for</code> loops is with the <code>;</code>, for example this syntax does the same thing as above:</p>
<pre><code>for i in ./data/MiSeq/*.fastq; do echo $i; fastqc $i -o $OUTDIR; done</code></pre>
<p>This command runs the script:</p>
<pre><code>bash set_e.sh</code></pre>
<p><strong>CHALLENGE</strong></p>
<ol style="list-style-type: decimal">
<li>What happens when you run the bash script above <strong>with</strong> and <strong>without</strong> the <code>set -e</code> option?</li>
<li>There is an error in the bash script. How can you fix the script? (Bonus: try adding <code>set -x</code> to your bash script)</li>
</ol>
</div>
</div>
<div id="conditions-and-loops" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Conditions and loops</h2>
<div id="conditions-and-if-statements" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Conditions and If statements</h3>
<ul>
<li>an intro to scripts with conditions
<ul>
<li>conditional operators in Unix (not all the same as other programming languages)</li>
<li>if/then/else/elif statements &gt; i.e., if file exists, do this. if file doesn’t, do that.</li>
<li>discuss indentation, or use <code>;</code></li>
<li>conditional statement structure ends with <code>fi</code></li>
</ul></li>
</ul>
<blockquote>
<p>(add demo here)</p>
</blockquote>
<p>Create a bash script called <code>ifs.sh</code> that uses if statements to compare 2 numbers:</p>
<pre><code>#!/bin/bash

a=40
b=20

if [ $a != $b ]
then
  echo &#39;a is not equal to b!&#39;
else
  echo &#39;a is equal to b!&#39;
fi</code></pre>
<p>Try replacing the <code>!=</code> operator with <a href="https://www.tutorialspoint.com/unix/unix-basic-operators.htm">other conditional operators</a> (i.e., <code>==</code>). Be sure to edit the echo statements!</p>
<p><strong>CHALLENGE</strong></p>
<blockquote>
<p>(add exercise here)</p>
</blockquote>
</div>
<div id="for-loops" class="section level3" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> <code>for</code> Loops</h3>
<ul>
<li>intro to <code>for</code> loops in scripts
<ul>
<li>discuss indentation in loop structure, or use <code>;</code></li>
<li>using <code>echo</code>: to print statements, to check what command is being run before actually running it</li>
<li>discuss what the <code>$</code> syntax means, i.e., <code>$i</code>, <code>${i}</code>, and <code>$(...)</code></li>
<li>for loop structure ends with <code>done</code></li>
</ul></li>
<li>material below from workshop 1 notes - review (if taught in previous workshop) and show how to put it into a shell script file:</li>
</ul>
<pre><code>for i in *.fastq
do
   echo $i
done</code></pre>
<p>This is running the command <code>echo</code> for every value of the variable ‘i’, which is set (one by one) to all the values in the expression <code>*.fastq</code>.</p>
<p>If we want to get rid of the extension ‘.fastq’, we can use the <code>basename</code> command:</p>
<pre><code>for i in *.fastq
do
   basename $i .fastq
done</code></pre>
<p>Now, this doesn’t actually rename the files - it just prints out the name, with the suffix ‘.fastq’ removed. To rename the files, we need to capture the new name in a variable:</p>
<pre><code>for i in *.fastq
do
   newname=$(basename $i .fastq).fq
   echo $newname
done</code></pre>
<p>What <code>$( ... )</code> does is run the command in the middle, and then replace the <code>$( )</code> with the output of running the command.</p>
<p>Now we have the old name (<code>$i</code>) and the new name (<code>$newname</code>) and we’re ready to write the rename command –</p>
<pre><code>for i in *.fastq
do
   newname=$(basename $i .fastq).fq
   echo mv $i $newname
done</code></pre>
<p><strong><em>Question:</em></strong> why did we put <code>echo</code> here?</p>
<p>Now that we’re pretty sure it all looks good, let’s run it for realz:</p>
<pre><code>for i in *.fastq
do
   newname=$(basename $i .fastq).fq
   mv $i $newname
done</code></pre>
<blockquote>
<p>(add demo/exercise here) –&gt; maybe the examples from workshop 1 notes, but in a script this time</p>
</blockquote>
<div id="running-scripts-in-a-loop" class="section level4" number="7.5.2.1">
<h4><span class="header-section-number">7.5.2.1</span> Running scripts in a loop</h4>
<ul>
<li>we can run loops in scripts AND scripts in loops!</li>
</ul>
<blockquote>
<p>(add demo/exercise here)</p>
</blockquote>
<ul>
<li>discuss using arguments for scripts
<ul>
<li><code>$</code> and the number assigns the argument a position in the line of code.</li>
<li>i.e., for the <code>ifs.sh</code> script, would change to:</li>
</ul></li>
</ul>
<pre><code>#!/bin/bash

a=$1
b=$2

if [ $a != $b ]
then
  echo &#39;a is not equal to b!&#39;
else
  echo &#39;a is equal to b!&#39;
fi</code></pre>
<p>After the <code>bash &lt;script name&gt;</code>, the syntax now assigns the 1st element (<code>$1</code>) to <code>40</code> and the 2nd element (<code>$2</code>) to <code>20</code>. This means you can enter different numbers when executing the script, without needing to edit the script file at all!</p>
<pre><code>bash ifs.sh 40 20</code></pre>
</div>
</div>
</div>
<div id="multiple-screens" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Multiple screens</h2>
<ul>
<li>say you want to run multiple scripts at once, or you want to put your computer to sleep and check back later, what can you do?</li>
<li>introducing <code>screen</code> and <code>tmux</code> –&gt; demo utility (i.e., here are these cool tools and when you might want to use them!)
<ul>
<li>when do you use screen vs. tmux? is it like choosing a text editor?</li>
</ul></li>
</ul>
<p>Basic commands for <code>screen</code> and <code>tmux</code> below. They both have keyboard shortcuts as well (<a href="https://training.nih-cfde.org/en/latest/General-Tools/Cheat-Sheets/screen_cheatsheet.html">screen cheat sheet</a>).</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Description</th>
<th>screen</th>
<th>tmux</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>start a screen session</td>
<td><code>screen -S &lt;session name&gt;</code></td>
<td><code>tmux new -s &lt;session name&gt;</code></td>
</tr>
<tr class="even">
<td>close a session</td>
<td><code>screen -d &lt;session name&gt;</code></td>
<td><code>tmux detach</code></td>
</tr>
<tr class="odd">
<td>go to existing session</td>
<td><code>screen -r &lt;session name&gt;</code></td>
<td><code>tmux attach -t &lt;session name&gt;</code></td>
</tr>
<tr class="even">
<td>list existing sessions</td>
<td><code>screen ls</code></td>
<td><code>tmux ls</code></td>
</tr>
<tr class="odd">
<td>end session</td>
<td><code>exit</code></td>
<td><code>tmux kill-session -t &lt;session name&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div id="concluding-thoughts-1" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Concluding thoughts</h2>
<p>(reference how today’s material will lead into upcoming workshops) - we’ll return to the concept of using scripts to execute/document analysis workflows in workshops 9 (Snakemake) and 10 (Using SLURM on HPC)</p>
</div>
<div id="appendix-exercise-answers" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Appendix: exercise answers</h2>
<p><em>Answers for <code>set -e</code> exercises</em>
1. Fails on 1st iteration with <code>set -e</code>, fails each iteration of the loop without <code>set -e</code></p>
<p>Output with <code>set -e</code>:</p>
<pre><code>(base) ~$ bash set_e.sh
./data/MiSeq/F3D0_S188_L001_R1_001.fastq
Specified output directory &#39;fastqc_reports&#39; does not exist</code></pre>
<p>Output without <code>set -e</code>:</p>
<pre><code>(base) ~$ bash set_e.sh
./data/MiSeq/F3D0_S188_L001_R1_001.fastq
Specified output directory &#39;fastqc_reports&#39; does not exist
./data/MiSeq/F3D0_S188_L001_R2_001.fastq
Specified output directory &#39;fastqc_reports&#39; does not exist
./data/MiSeq/F3D141_S207_L001_R1_001.fastq
Specified output directory &#39;fastqc_reports&#39; does not exist
./data/MiSeq/F3D141_S207_L001_R2_001.fastq
Specified output directory &#39;fastqc_reports&#39; does not exist
...</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Add <code>set -x</code> option to print out the commands computer is running. There’s an error in the path to save FastQC output reports.</li>
</ol>
<pre><code># wrong path
OUTDIR=&#39;fastqc_reports&#39;

# correct path
OUTDIR=&#39;./data/fastqc_reports&#39;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="structuring-your-projects-for-current-and-future-you.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="keeping-track-of-your-files-with-version-control.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ngs-docs/2021-august-remote-computing/edit/main/07-automation-scripting.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ngs-docs/2021-august-remote-computing/blob/main/07-automation-scripting.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
